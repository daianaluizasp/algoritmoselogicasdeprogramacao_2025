# Gradua√ß√£o em Intelig√™ncia Artificial e Automa√ß√µes Digitais
# Disciplina Algoritmos e L√≥gica de Programa√ß√£o
# Programa criado para Gest√£o de Pe√ßas, Qualidade e Armazenamento

# Armazenamento das pe√ßas
pe√ßas_produzidas = []
caixa_atual = []
caixas_fechadas = []

# Controle para o relat√≥rio
total_aprovadas = 0
total_reprovadas = 0
reprovadas_por_peso = 0
reprovadas_por_cor = 0
reprovadas_por_comprimento = 0

# Crit√©rios de aprova√ß√£o (considerando peso, comprimento e cores)
peso_minimo = 95
peso_maximo = 105
comprimento_minimo = 10
comprimento_maximo = 20
cores_aceitas = ["azul", "verde"]

# Controle do menu
opcao = ""

def avaliar_qualidade(peso, cor, comprimento):
    global reprovadas_por_peso, reprovadas_por_cor, reprovadas_por_comprimento

    if not (peso_minimo <= peso <= peso_maximo):
        reprovadas_por_peso += 1
        return False, "Peso fora do limite permitido (deve ser 95g a 105g)"

    if cor.lower() not in cores_aceitas:
        reprovadas_por_cor += 1
        return False, f"Cor n√£o aceita (deve ser azul ou verde)"

    if not (comprimento_minimo <= comprimento <= comprimento_maximo):
        reprovadas_por_comprimento += 1
        return False, f"Comprimento fora do limite permitido (deve ser 10cm a 20cm)"

    return True, "Aprovada"

def cadastrar_pe√ßa():
    global total_aprovadas, total_reprovadas, caixa_atual, caixas_fechadas, pe√ßas_produzidas

    print("\n üëâ Cadastro de nova pe√ßa üëà")
    print("\n")
    try:
        id_peca = input("Digite o ID da pe√ßa: ")
        peso = float(input("Digite o peso da pe√ßa em gramas:"))
        cor = input("Digite a cor da pe√ßa: ").strip().lower()
        comprimento = float(input("Digite o comprimento da pe√ßa em cm: "))
    
    except ValueError:
        print("Entrada inv√°lida. Peso e comprimento devem ser n√∫meros.")
        return # Sai da fun√ß√£o se a entrada for inv√°lida
        
# Avalia√ß√£o e Cria√ß√£o do Dicion√°rio
    aprovada, motivo = avaliar_qualidade(peso, cor, comprimento)
    status = "Aprovada" if aprovada else f"Reprovada ({motivo})"
    
    pe√ßa = {"id": id_peca, "peso": peso, "cor": cor, "comprimento": comprimento, "status": status, "motivo": motivo}
    pe√ßas_produzidas.append(pe√ßa)

    print("\n" + "*"*40)
    print(f"üëâ Pe√ßa {id_peca} - Status: {status} üëà")
    print("\n" + "*"*40)

# L√≥gica de Aprova√ß√£o e Caixas
    if aprovada:
        global total_aprovadas # Garante que a atribui√ß√£o √© global (boa pr√°tica)
        total_aprovadas += 1
        caixa_atual.append(pe√ßa)

        # Limitar a caixa quando chegar a 10 pe√ßas:
        if len(caixa_atual) >= 10:
            caixas_fechadas.append(caixa_atual)
            caixa_atual = []
            print("CAPACIDADE M√ÅXIMA ATINGIDA. Vamos come√ßar uma nova caixa.")
        else:
            print(f"‚úÖ Pe√ßa adicionada √† caixa atual. Ainda restam: {10 - len(caixa_atual)}/10 para atingir o limite")
            print("\n" + "*"*40)
            
# L√≥gica de Reprova√ß√£o
    else:
        global total_reprovadas # Garante que a atribui√ß√£o √© global (boa pr√°tica)
        total_reprovadas += 1

def remover_pe√ßa():
    global pe√ßas_produzidas
    print("üëâ Remo√ß√£o de Pe√ßa üëà")
    id_para_remover = input("Digite o ID da pe√ßa que deseja remover:").strip()
    
    nova_lista_pe√ßas = []
    removida = False

    for pe√ßa in pe√ßas_produzidas:
        if pe√ßa["id"] == id_para_remover:
            removida = True
            print(f"‚úÖ Pe√ßa com ID {id_para_remover} e status '{pe√ßa['status']}' removida com sucesso")
    else:
        nova_lista_pe√ßas.append(pe√ßa)

        pe√ßas_produzidas = nova_lista_pe√ßas

    if not removida:
        print(f"‚ùå ERRO: Nenhuma pe√ßa encontrada com o ID {id_para_remover}.")

def gerar_relatorio_final():
    global opcao, total_aprovadas, total_reprovadas
    print("\n" + "*"*40)
    print("üëâ Relat√≥rio consolidado üëà")
    print("\n" + "*"*40)
    opcao = "0"

# Controle total das pe√ßas (produzidas, aprovadas e reprovadas)
   
    total_geral = total_aprovadas + total_reprovadas
    print(f"Total de pe√ßas produzidas: {total_geral}")
    print(f"Total de pe√ßas aprovadas: {total_aprovadas}")
    print(f"Total de pe√ßas reprovadas: {total_reprovadas}")

# Motivo da reprova√ß√£o
    print("\n‚ùå Motivos de reprova√ß√£o")
    print(f" - Por peso: {reprovadas_por_peso}")
    print(f" - Por cor: {reprovadas_por_cor}")
    print(f" - Por comprimento: {reprovadas_por_comprimento}")

# Controle das caixas
caixas_em_uso = len(caixas_fechadas)
if caixa_atual:
    caixas_em_uso += 1
    print(f"Caixa atual (em andamento): {len(caixa_atual)}/10")

    print(f"Quantidade de caixas utilizadas (fechadas e em uso): {caixas_em_uso}")
    print("----------------------------")

# MENU DO PROGRAMA

while opcao != "0":

    print ("Menu de op√ß√µes:")
    print ("1 - Cadastrar pe√ßa nova")
    print ("2 - Lista de pe√ßas aprovadas/reprovadas")
    print ("3 - Remover pe√ßa cadastrada")
    print ("4 - Listar caixas fechadas")
    print ("5 - Gerar relat√≥rio final")

    opcao = input ("Digite a op√ß√£o desejada: ")

    if opcao == "1":
       cadastrar_pe√ßa()

    elif opcao == "2":
        print("\n" + "*"*40)
        print("üëâ Lista de Pe√ßas (Aprovadas e Reprovadas) üëà")
        print("\n" + "*"*40)

        for pe√ßa in pe√ßas_produzidas:
            print(f"ID: {pe√ßa['id']} | Status: {pe√ßa['status']}")

    elif opcao == "3":
        remover_pe√ßa()

    elif opcao == "4":
        print("*"*40)
        print(f"üëâ Caixas Fechadas ({len(caixas_fechadas)} total) üëà")
        print("*"*40)
        for i, caixa in enumerate(caixas_fechadas):
            print(f"Caixa {i+1}: {len(caixa)} pe√ßas")
        if caixa_atual:
            print(f"Caixa atual: {len(caixa_atual)} pe√ßas (em andamento)")
    
    elif opcao == "5":
        gerar_relatorio_final()

    else:
        print ("-------------")
        print ("Op√ß√£o inv√°lida, tente novamente...")
        print ("-------------")

print("\n üëâ Sistema Encerrado üëà")